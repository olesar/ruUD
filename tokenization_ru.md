# Токенизация

Правила токенизации для русского языка в целом следуют принципам НКРЯ.  

* Как общее правило, токены выделяются "от пробела до пробела". Регулярное выражение `[А-zА-яЁё\-]+` обычно соответствует одному токену.  
* Знаки пунктуации, которые, согласно традиции, записываются непосредственно до или после слова (без пробела), выделяются в отдельный токен.  
* Каждый знак препинания в цепочке трактуется как отдельный токен: например, цепочка `)", —` анализируется как четыре токена (скобка, кавычка, запятая, тире). Исключением являются известные многосимвольные комбинации знаков препинания, такие как `--` (и другие тире, состоящие из нескольких символов дефиса, минуса, тире), `...` (и другие многоточия, состоящие из двух или более символов точки), `?!` (и другие сочетания любого количества вопросительных и восклицательных знаков), `!..` (сочетания восклицательного или вопросительного знака с многоточием), `''` (кавычки, состоящие из нескольких символов), а также эмодзи и смайлики, включающие в себя знаки препинания: `:)`, `^_^` и др.  
* Общепринятые не-кириллические многосимвольные математические, физические, химические записи, не содержащие пробела, трактуются как один токен: `3^2`, `°С`, `C2H6O`.  

Отдельного упоминания заслуживают следующие случаи:  
* Числовые записи нескольких разрядов, обыкновенных и десятичных дробей, отрицательных чисел, комплексных чисел, не содержащие пробела внутри, трактуются как один токен: например, `245`, `1.000.000`, `3,14`, `-0.25`.  
* Записи времени вида `20:55`, `20.55`, `20-55`, `1:03:01` или `1h59m` трактуются как один токен. Из двух токенов состоят такие записи, как `8:55AM` (`8:55` и `AM`) и `15:00мск` (`15:00` и `мск`).   
* Записи даты вида `20.04.2012` трактуются как один токен.
* Записи географических координат вида `55,755831°`, `N55.755831°`, `37°37′3.6228″E` трактуются как один токен, если не содержат пробела внутри.   
* Как отдельные токены трактуются символы денежных валют, процентов, плюса и минуса в записях температуры. Так, запись `$500` состоит из двух токенов (`$` и `500`), запись `2,67%` -- также из двух токенов (`2,67`, `%`), запись `+27°С` из трех токенов (`+`, `27`, `°С`).  
* Числовые выражения с дефисом и кириллическим окончанием (например, `1-ый`, `3-м`), а также русские существительные, прилагательные и слова других частей речи, содержащие числовую запись (например, `500-летие`, `79-летних`, `3-жды`), трактуются как один токен.   
* Слова, состоящие из кириллических букв и дефиса, делятся на два класса.
  * Если первая часть слова склоняется, то слово состоит из нескольких токенов: например, `Ростове-на-Дону` состоит из пяти токенов (`Ростове`, `-`, `на`, `-`, `Дону`).
  * Дискурсивные частицы _-то_, _-с_, _-ка_, _-таки_, _-тко_ и т. п. выделяются в отдельный токен: например `Вася-то` состоит из трех токенов (`Вася`, `-`, `то`). Исключением являются неопределенные местоимения и наречия на _-то_, _все-таки_, см. ниже.   
  * Как один токен анализируются предлоги _из-за_, _из-под_, _по-над_, _а-ля_ и [ряд других](https://ruscorpora.ru/s/axMZE).
  * Как один токен анализируются прилагательные цвета типа _зелено-серый_, _бледно-розовый_, _мутновато_голубой_.  
  * Как один токен анализируются географические названия с префиксами _Санкт-_, _Сан-_, _Нью-_, _Монте-_, _Лос-_ (например, _Санкт-Петербург_, _Нью-Йорк_, _Монте-Карло_, _Лос-Аламос_).   
  * В остальных случаях следует ориентироваться на Грамматический словарь А. А. Зализняка. Если слово с дефисом в нем указано, то оно анализируется как один токен. Иначе слово должно делиться по дефису (например, _добровольно-принудительно_).  
  (Примечание. Иногда написания с дефисом образуют открытый класс, и не все элементы этого класса попадают в Грамматический словарь. Так, например, воинское звание _генерал-капитан_ по смыслу не сводится к комбинации _генерал_ и _капитан_, имеет первую несклоняемую часть, поэтому его следует анализировать как один токен, несмотря на то, что оно не входит в словарь.)  

* Аббревиатуры анализируются как один токен (например, `МВД`, `ГлавАПУ`, `ГУЛАГу`). Если одна часть аббревиатуры отделяется от другой пробелом, то пробел разбивает аббревиатуру на несколько токенов (т. е. `МВД РФ` анализируется как два токена).  
* Сокращения, заканчивающиеся точкой, включая инициалы, анализируются как один токен, включающий точку (например, `стр.`, `П.`. Если эта точка попадает на конец предложения, то она токенизируется отдельно (то есть обозначает конец предложения).  
* Сокращения не могут содержать точки внутри токена, то есть написания вида `и т.д.`, `и т.п.`, `В.И.` делятся на несколько токенов (то есть `и`, `т.`, `д.`; `и`, `т.`, `п.`; `В.`, `И.`). Как исключение, аббревиатуры, записанные в стиле послереволюционной эпохи как `Р.С.Ф.С.Р.` (то есть с точкой после каждой буквы), анализируются как один токен.    
* Адреса электронной почты, ссылки URL, имена пользователей в стиле Телеграма, хештеги анализируются как один токен: `no@mail.ru`, `https://github.com`, `@anna_li`, `#отдыхайвРоссии`.   


### Местоимения и наречия  

* Неопределенные местоимения и наречия, такие как `кто-нибудь`, `кто-либо`, `кто-то`, `кое-какой`, `где-либо`, разбираются как один токен (заметим, даже в случае, если первая часть склоняется).  
* В предложных сочетаниях местоимения и наречия на _кое-_ разбиваются на три токена: например, _кое к кому_ разбивается на `кое`, `к`, `кому`.  
* Отрицательные местоимения, наречия и наречные предикативы разбираются как один токен, например: `никто`, `никакой`, `нигде`, `негде`. Однако в предложной группе отрицательная частица и предлог токенизируются отдельно, например: _ни к кому_ как `ни`, `к`, `кому`, а _не от кого_ как `не`, `от`, `кого`.  

### Аналитические формы, слова с отрицанием, слова с пол-  

* возвратные глаголы разбираются как один токен, согласно правилам орфографии, например: `моется`, `пройтись`, `неразорвавшийся` (заметим, что в других славянских языках орфография и токенизация может отличаться).  
* формы сослагательного наклонения, аналитического пассива, сложного будущего времени, аналитической степени сравнения и т. п. грамматические конструкции разбиваются на токены согласно правилам орфографии, то есть по пробелу, например: `могли`, `бы`; `были`, `зафиксированы`; `будет`, `держаться`; `более`, `серьезные`.  
* отрицательные частицы _не_ и _ни_ токенизируются согласно правилам орфографии, например: `не`, `реагируя`; `ни`, `в`, `какую`; но `непоправимый`; `незавершенный`; `никаких`.  
* слова с `пол-` и `полу-` анализируются как один токен, например: `поллитра`, `пол-яблока`, `полубезработный`.  
